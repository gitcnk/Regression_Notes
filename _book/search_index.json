[["index.html", "To Regress or not to Regress! 1 Introduction", " To Regress or not to Regress! CK 2024-03-24 1 Introduction Regression models are the most widely used and abused statistical modelling framework in the world. It popularity is based on its simplicity and the elegant mathematical theory behind it. Although the theory is beautiful, it is based on some assumptions which we must always be wary of. Just like the p-values, the Regression modelling framework is a tool and we need to understand its limitations when we use it. Let’s dive in. "],["an-example.html", "2 An Example 2.1 Another Example", " 2 An Example Here is a sample of data from home prices in Washington state: WA_houses %&gt;% head() %&gt;% kable() price bedrooms bathrooms sqft_living sqft_lot waterfront 475000 4 2.50 2040 16200 0 316000 4 1.50 2120 46173 0 802000 4 2.25 2130 8734 0 905000 4 2.50 3330 9557 0 700000 4 2.25 2440 9450 0 178500 3 1.00 900 10511 0 Here are the estimated coefficients of the model: #uqvipjqxkn table { font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #uqvipjqxkn thead, #uqvipjqxkn tbody, #uqvipjqxkn tfoot, #uqvipjqxkn tr, #uqvipjqxkn td, #uqvipjqxkn th { border-style: none; } #uqvipjqxkn p { margin: 0; padding: 0; } #uqvipjqxkn .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #uqvipjqxkn .gt_caption { padding-top: 4px; padding-bottom: 4px; } #uqvipjqxkn .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #uqvipjqxkn .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #uqvipjqxkn .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #uqvipjqxkn .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #uqvipjqxkn .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #uqvipjqxkn .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #uqvipjqxkn .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #uqvipjqxkn .gt_column_spanner_outer:first-child { padding-left: 0; } #uqvipjqxkn .gt_column_spanner_outer:last-child { padding-right: 0; } #uqvipjqxkn .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #uqvipjqxkn .gt_spanner_row { border-bottom-style: hidden; } #uqvipjqxkn .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #uqvipjqxkn .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #uqvipjqxkn .gt_from_md > :first-child { margin-top: 0; } #uqvipjqxkn .gt_from_md > :last-child { margin-bottom: 0; } #uqvipjqxkn .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #uqvipjqxkn .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #uqvipjqxkn .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #uqvipjqxkn .gt_row_group_first td { border-top-width: 2px; } #uqvipjqxkn .gt_row_group_first th { border-top-width: 2px; } #uqvipjqxkn .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #uqvipjqxkn .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #uqvipjqxkn .gt_first_summary_row.thick { border-top-width: 2px; } #uqvipjqxkn .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #uqvipjqxkn .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #uqvipjqxkn .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #uqvipjqxkn .gt_last_grand_summary_row_top { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #uqvipjqxkn .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #uqvipjqxkn .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #uqvipjqxkn .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #uqvipjqxkn .gt_footnote { margin: 0px; font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #uqvipjqxkn .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #uqvipjqxkn .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #uqvipjqxkn .gt_left { text-align: left; } #uqvipjqxkn .gt_center { text-align: center; } #uqvipjqxkn .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #uqvipjqxkn .gt_font_normal { font-weight: normal; } #uqvipjqxkn .gt_font_bold { font-weight: bold; } #uqvipjqxkn .gt_font_italic { font-style: italic; } #uqvipjqxkn .gt_super { font-size: 65%; } #uqvipjqxkn .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #uqvipjqxkn .gt_asterisk { font-size: 100%; vertical-align: 0; } #uqvipjqxkn .gt_indent_1 { text-indent: 5px; } #uqvipjqxkn .gt_indent_2 { text-indent: 10px; } #uqvipjqxkn .gt_indent_3 { text-indent: 15px; } #uqvipjqxkn .gt_indent_4 { text-indent: 20px; } #uqvipjqxkn .gt_indent_5 { text-indent: 25px; } Characteristic Beta SE1 Statistic p-value (Intercept) -54,163 6,448 -8.40 sqft_living 286 2.84 101 R² 0.504 Sigma 260,452 1 SE = Standard Error Let’s look at the correlation of bedrooms with the price after we adjust for the square footage of the house: #jzwywkbnty table { font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } #jzwywkbnty thead, #jzwywkbnty tbody, #jzwywkbnty tfoot, #jzwywkbnty tr, #jzwywkbnty td, #jzwywkbnty th { border-style: none; } #jzwywkbnty p { margin: 0; padding: 0; } #jzwywkbnty .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #jzwywkbnty .gt_caption { padding-top: 4px; padding-bottom: 4px; } #jzwywkbnty .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #jzwywkbnty .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; } #jzwywkbnty .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #jzwywkbnty .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #jzwywkbnty .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #jzwywkbnty .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #jzwywkbnty .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #jzwywkbnty .gt_column_spanner_outer:first-child { padding-left: 0; } #jzwywkbnty .gt_column_spanner_outer:last-child { padding-right: 0; } #jzwywkbnty .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; } #jzwywkbnty .gt_spanner_row { border-bottom-style: hidden; } #jzwywkbnty .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; } #jzwywkbnty .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #jzwywkbnty .gt_from_md > :first-child { margin-top: 0; } #jzwywkbnty .gt_from_md > :last-child { margin-bottom: 0; } #jzwywkbnty .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #jzwywkbnty .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; } #jzwywkbnty .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; } #jzwywkbnty .gt_row_group_first td { border-top-width: 2px; } #jzwywkbnty .gt_row_group_first th { border-top-width: 2px; } #jzwywkbnty .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #jzwywkbnty .gt_first_summary_row { border-top-style: solid; border-top-color: #D3D3D3; } #jzwywkbnty .gt_first_summary_row.thick { border-top-width: 2px; } #jzwywkbnty .gt_last_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #jzwywkbnty .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #jzwywkbnty .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #jzwywkbnty .gt_last_grand_summary_row_top { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; } #jzwywkbnty .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #jzwywkbnty .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #jzwywkbnty .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #jzwywkbnty .gt_footnote { margin: 0px; font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #jzwywkbnty .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #jzwywkbnty .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; } #jzwywkbnty .gt_left { text-align: left; } #jzwywkbnty .gt_center { text-align: center; } #jzwywkbnty .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #jzwywkbnty .gt_font_normal { font-weight: normal; } #jzwywkbnty .gt_font_bold { font-weight: bold; } #jzwywkbnty .gt_font_italic { font-style: italic; } #jzwywkbnty .gt_super { font-size: 65%; } #jzwywkbnty .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; } #jzwywkbnty .gt_asterisk { font-size: 100%; vertical-align: 0; } #jzwywkbnty .gt_indent_1 { text-indent: 5px; } #jzwywkbnty .gt_indent_2 { text-indent: 10px; } #jzwywkbnty .gt_indent_3 { text-indent: 15px; } #jzwywkbnty .gt_indent_4 { text-indent: 20px; } #jzwywkbnty .gt_indent_5 { text-indent: 25px; } Characteristic Beta SE1 Statistic p-value (Intercept) 56,765 9,643 5.89 sqft_living 316 3.40 92.8 bedrooms -51,143 3,336 -15.3 R² 0.515 Sigma 257,456 1 SE = Standard Error It looks quite strange that bedroom coefficient is negative! What’s going on? We need to dig deeper. The square footage variable has lot of variance, it ranges from tiny to mid to large. Here is the distribution of square footage variable: Some summary stats of the size of the houses. It seems like 50% of houses are around 1400 to 2500 square feet. quantile(WA_houses$sqft_living, probs = c(.05,.25,.5,.75,.95)) %&gt;% kable() x 5% 940 25% 1430 50% 1910 75% 2550 95% 3750 So let’s group them into 3 buckets (small houses, mid-sized houses and large houses) WA_houses$size &lt;- cut(WA_houses$sqft_living, breaks = c(0,1400,2500,Inf), labels =c(&#39;small&#39;, &#39;mid-sized&#39;, &#39;large&#39;)) head(WA_houses) %&gt;% kable() price bedrooms bathrooms sqft_living sqft_lot waterfront size 475000 4 2.50 2040 16200 0 mid-sized 316000 4 1.50 2120 46173 0 mid-sized 802000 4 2.25 2130 8734 0 mid-sized 905000 4 2.50 3330 9557 0 large 700000 4 2.25 2440 9450 0 mid-sized 178500 3 1.00 900 10511 0 small Let’s explore the relationship of bedrooms with price: **How Bedrooms correlate with Price** Let’s remove the obvious outlier and redo the analysis. If you look at the data you’ll see that this outlier corresponds to row number 8063: WA_houses[8063,] %&gt;% kable() price bedrooms bathrooms sqft_living sqft_lot waterfront size 8063 640000 33 1.75 1620 6000 0 mid-sized Also, if you examine more, you’ll see that there are 5 houses with no bedrooms! Let’s remove these and redo the plots: Med Large 2.1 Another Example wage_data %&gt;% head() %&gt;% kable() year age maritl race education region jobclass health health_ins logwage wage 2006 18 1. Never Married 1. White 1. &lt; HS Grad 2. Middle Atlantic 1. Industrial 1. &lt;=Good 2. No 4.318063 75.04315 2004 24 1. Never Married 1. White 4. College Grad 2. Middle Atlantic 2. Information 2. &gt;=Very Good 2. No 4.255273 70.47602 2003 45 2. Married 1. White 3. Some College 2. Middle Atlantic 1. Industrial 1. &lt;=Good 1. Yes 4.875061 130.98218 2003 43 2. Married 3. Asian 4. College Grad 2. Middle Atlantic 2. Information 2. &gt;=Very Good 1. Yes 5.041393 154.68529 2005 50 4. Divorced 1. White 2. HS Grad 2. Middle Atlantic 2. Information 1. &lt;=Good 1. Yes 4.318063 75.04315 2008 54 2. Married 1. White 4. College Grad 2. Middle Atlantic 2. Information 2. &gt;=Very Good 1. Yes 4.845098 127.11574 "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
